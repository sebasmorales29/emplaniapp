<!-- Modal de Confirmaci√≥n de Contrase√±a de Administrador -->
<div class="modal fade" id="adminPasswordModal" tabindex="-1" role="dialog" aria-labelledby="adminPasswordModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="adminPasswordModalLabel">Confirmaci√≥n de Administrador Requerida</h5>
                <button type="button" class="close" id="adminPasswordModalClose" aria-label="Cerrar">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Para guardar estos cambios, por favor ingrese su contrase√±a de administrador.</p>
                <form id="adminPasswordForm" onsubmit="return false;">
                    <div class="form-group">
                        <label for="adminPasswordInput">Contrase√±a</label>
                        <div class="password-wrapper">
                            <input type="password" class="form-control" id="adminPasswordInput" placeholder="Contrase√±a">
                            <i class="fa fa-eye toggle-password" style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer; color: #666; z-index: 10; font-size: 16px;" title="Mostrar/Ocultar contrase√±a">üëÅ</i>
                        </div>
                        <div id="adminPasswordError" class="text-danger mt-2" style="display: none;"></div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" id="cancelAdminPasswordBtn">Cancelar</button>
                <button type="button" class="btn btn-primary" id="confirmAdminPasswordBtn">Confirmar y Guardar</button>
            </div>
        </div>
    </div>
</div>

<script>
// Namespace global para el modal de contrase√±a de administrador
window.AdminPasswordModal = window.AdminPasswordModal || {};

$(document).ready(function() {
    // Solo inicializar una vez
    if (window.AdminPasswordModal.initialized) {
        return;
    }

    // Funci√≥n centralizada para limpiar el modal
    window.AdminPasswordModal.clear = function() {
        $('#adminPasswordInput').val('');
        $('#adminPasswordError').hide().text('');
    };

    // Funci√≥n centralizada para mostrar el modal
    window.AdminPasswordModal.show = function() {
        window.AdminPasswordModal.clear();
        $('#adminPasswordModal').modal('show');
    };

    // Funci√≥n centralizada para ocultar el modal
    window.AdminPasswordModal.hide = function() {
        $('#adminPasswordModal').modal('hide');
    };

    // Marcar como inicializado
    window.AdminPasswordModal.initialized = true;

    // L√≥gica para mostrar/ocultar contrase√±a
    $(document).on('click', '.toggle-password', function() {
        var $icon = $(this);
        var $input = $icon.closest('.password-wrapper').find('input');
        
        // Cambiar el tipo de input
        if ($input.attr('type') === 'password') {
            $input.attr('type', 'text');
            $icon.removeClass('fa-eye').addClass('fa-eye-slash');
            $icon.text('üëÅ‚Äçüó®'); // Emoji para ojo tachado
        } else {
            $input.attr('type', 'password');
            $icon.removeClass('fa-eye-slash').addClass('fa-eye');
            $icon.text('üëÅ'); // Emoji para ojo normal
        }
    });
});
</script>

<style>
.password-wrapper {
    position: relative;
    display: inline-block;
    width: 100%;
}

.password-wrapper input {
    padding-right: 40px !important;
    width: 100%;
}

.toggle-password {
    position: absolute !important;
    right: 10px !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    cursor: pointer !important;
    color: #666 !important;
    z-index: 10 !important;
    font-size: 16px !important;
    background: transparent !important;
    border: none !important;
    padding: 0 !important;
    margin: 0 !important;
}

.toggle-password:hover {
    color: #333 !important;
}

.toggle-password:focus {
    outline: none !important;
}
</style> 