@model Emplaniapp.UI.Models.LoginViewModel
@{
    ViewBag.Title = "Iniciar sesión";
    Layout = "~/Views/Shared/_LoginLayout.cshtml";
}


<div class="sign-user_card bg-white">

    <!-- Header de la empresa -->
    <div>
        @*<img src="https://medismart.net/wp-content/uploads/2023/06/suplidora-royal.jpg" alt="Logo">*@
        <img src="~/Content/Images/Emplaniapp_Logo1.png" alt="logo">
    </div>

    <br /><br />
    <h3>Iniciar Sesión</h3>
    

    <!-- Formulario de login -->
    <div class="form-input">
        @using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { role = "form", id = "loginForm" }))
        {
            @Html.AntiForgeryToken()

            <div class="row mb-2">
                <div class="col-lg-12">
                    <div class="form-group">
                        @Html.LabelFor(m => m.UserName, "Usuario", new { @class = "form-label text-secondary" })
                        @Html.TextBoxFor(m => m.UserName, new
                        {
                            @class = "form-control",
                            @type = "text",
                            @style = "text-align: center;",
                            @placeholder = "",
                            @autocomplete = "username"
                        })
                        @Html.ValidationMessageFor(m => m.UserName, "", new { @class = "advertencia" })
                    </div>
                </div>
            </div>

            <div class="row mb-2">
                <div class="col-lg-12">
                    <div class="form-group">
                        @Html.LabelFor(m => m.Password, "Contraseña", new { @class = "form-label text-secondary" })
                        @Html.PasswordFor(m => m.Password, new
                        {
                            @class = "floating-input form-control",
                            @type = "password",
                            @style = "text-align: center;",
                            @placeholder = "",
                            @autocomplete = "current-password"
                        })
                        @Html.ValidationMessageFor(m => m.Password, "", new { @class = "advertencia" })
                    </div>
                </div>
            </div> 

            <button type="submit" class="btn btn-primary" id="loginBtn">
                Iniciar Sesión
            </button>
        
            <div class="mt-4 justify-content-center" style="text-size-adjust:auto;">
                <p class="text-secondary">¿Olvidó su contraseña? 
                    @Html.ActionLink("Ingrese aquí", "ForgotPassword", "Account",null , new {@class = "text-primary" })
                </p>
            </div>

        }


    </div>

</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script>
        $(document).ready(function () {
         // Efecto de loading en el botón
            $('#loginForm').submit(function () {
                var btn = $('#loginBtn');
                //btn.addClass('btn-loading');
                //btn.prop('disabled', true);

                // Si hay errores de validación, remover el loading
                setTimeout(function () {
                    if ($('.field-validation-error:visible').length > 0 || $('.validation-summary:visible').length > 0) {
                        btn.removeClass('btn-loading');
                        btn.prop('disabled', false);
                    }
                }, 100);
            });

            // Efectos de focus en los inputs

            // Animación de entrada
            setTimeout(function () {
                $('.sign-user_card').css({
                    'animation': 'slideInUp 0.6s ease-out',
                    'opacity': '1'
                });
            }, 100);
        });

       
    </script>
}
